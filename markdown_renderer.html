<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Markdown Renderer â€” Studio</title>

  <!-- Marked.js â€” Markdown â†’ HTML -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <!-- PrismJS â€” syntax highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1/themes/prism-tomorrow.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1/plugins/autoloader/prism-autoloader.min.js"></script>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #0d1117;
      color: #c9d1d9;
      min-height: 100vh;
    }

    /* â”€â”€ Navigation (shared) â”€â”€ */
    nav {
      background: #161b22;
      border-bottom: 1px solid #30363d;
      padding: 0 1.5rem;
      display: flex;
      align-items: center;
      gap: 0;
      flex-wrap: wrap;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    nav .brand {
      font-weight: 700;
      font-size: 1.1rem;
      color: #58a6ff;
      padding: 1rem 1rem 1rem 0;
      text-decoration: none;
      margin-right: 1rem;
      white-space: nowrap;
    }
    nav a {
      color: #8b949e;
      text-decoration: none;
      padding: 1rem 0.75rem;
      font-size: 0.875rem;
      transition: color 0.2s;
      white-space: nowrap;
    }
    nav a:hover, nav a.active { color: #c9d1d9; border-bottom: 2px solid #58a6ff; }

    /* â”€â”€ Toolbar â”€â”€ */
    .toolbar {
      max-width: 860px;
      margin: 1.5rem auto 0;
      padding: 0 1.5rem;
      display: flex;
      gap: 0.75rem;
      align-items: center;
      flex-wrap: wrap;
    }

    .toolbar input[type="text"] {
      flex: 1;
      min-width: 200px;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 6px;
      padding: 0.5rem 0.75rem;
      color: #c9d1d9;
      font-size: 0.875rem;
    }

    .toolbar input[type="text"]:focus {
      outline: none;
      border-color: #58a6ff;
    }

    .toolbar button {
      background: #238636;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .toolbar button:hover { background: #2ea043; }

    /* â”€â”€ Markdown output â”€â”€ */
    #content {
      max-width: 860px;
      margin: 2rem auto 4rem;
      padding: 0 1.5rem;
      line-height: 1.7;
    }

    #content h1, #content h2, #content h3 {
      color: #e6edf3;
      border-bottom: 1px solid #21262d;
      padding-bottom: 0.3em;
      margin: 1.5em 0 0.75em;
    }

    #content h1 { font-size: 1.75rem; }
    #content h2 { font-size: 1.375rem; }
    #content h3 { font-size: 1.125rem; }

    #content p { margin-bottom: 1em; }

    #content a { color: #58a6ff; }

    #content code:not([class]) {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 4px;
      padding: 0.1em 0.4em;
      font-size: 0.875em;
    }

    #content pre {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 1rem;
      overflow-x: auto;
      margin-bottom: 1em;
    }

    #content pre code { background: none; border: none; padding: 0; font-size: 0.875rem; }

    #content table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1em;
    }

    #content th, #content td {
      border: 1px solid #30363d;
      padding: 0.5rem 0.75rem;
      text-align: left;
    }

    #content th { background: #161b22; color: #e6edf3; }
    #content tr:nth-child(even) { background: #0d1117; }

    #content blockquote {
      border-left: 4px solid #30363d;
      padding-left: 1rem;
      color: #8b949e;
      margin-bottom: 1em;
    }

    #content ul, #content ol { padding-left: 1.5rem; margin-bottom: 1em; }
    #content li { margin-bottom: 0.25em; }

    #content hr { border: none; border-top: 1px solid #21262d; margin: 2em 0; }

    .error { color: #f85149; background: #161b22; border: 1px solid #f85149; border-radius: 8px; padding: 1rem; }

    footer {
      text-align: center;
      padding: 2rem;
      font-size: 0.8rem;
      color: #484f58;
      border-top: 1px solid #21262d;
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html" class="brand">ðŸŽ¬ Studio</a>
    <a href="markdown_renderer.html?file=1_Real_Unknown/README.md">1 Â· Unknown</a>
    <a href="markdown_renderer.html?file=2_Environment/README.md">2 Â· Environment</a>
    <a href="3_Simulation/carousel.html">3 Â· Simulation</a>
    <a href="markdown_renderer.html?file=4_Formula/README.md">4 Â· Formula</a>
    <a href="markdown_renderer.html?file=5_Symbols/README.md">5 Â· Symbols</a>
    <a href="markdown_renderer.html?file=6_Semblance/README.md">6 Â· Semblance</a>
    <a href="markdown_renderer.html?file=7_Testing_Known/README.md">7 Â· Testing</a>
    <a href="3_Simulation/video.html">â–¶ Video</a>
    <a href="markdown_renderer.html" class="active">ðŸ“„ MD Renderer</a>
  </nav>

  <div class="toolbar">
    <input type="text" id="fileInput" placeholder="Path to .md file, e.g. 4_Formula/README.md" />
    <button onclick="loadFile()">Load</button>
  </div>

  <div id="content"><p style="color:#8b949e;margin-top:2rem;text-align:center;">Enter a Markdown file path above and click Load, or use a <code>?file=</code> query parameter.</p></div>

  <footer>Studio Â· Markdown Renderer Â· Powered by Marked.js &amp; PrismJS</footer>

  <script>
    // Configure marked
    marked.setOptions({ breaks: true, gfm: true });

    async function loadFile() {
      const path = document.getElementById('fileInput').value.trim();
      if (!path) return;
      const contentEl = document.getElementById('content');
      contentEl.innerHTML = '<p style="color:#8b949e">Loadingâ€¦</p>';
      try {
        const res = await fetch(path);
        if (!res.ok) throw new Error(`HTTP ${res.status} - ${res.statusText}`);
        const md = await res.text();
        contentEl.innerHTML = marked.parse(md);
        // Highlight code blocks
        Prism.highlightAllUnder(contentEl);
        // Update page title
        const h1 = contentEl.querySelector('h1');
        if (h1) document.title = h1.textContent + ' â€” Studio';
      } catch (err) {
        contentEl.innerHTML = `<div class="error"><strong>Error loading file:</strong> ${err.message}</div>`;
      }
    }

    // Auto-load from ?file= query param
    const params = new URLSearchParams(location.search);
    const fileParam = params.get('file');
    if (fileParam) {
      document.getElementById('fileInput').value = fileParam;
      loadFile();
    }

    // Highlight active nav link using exact file param match
    document.querySelectorAll('nav a[href]').forEach(a => {
      const href = a.getAttribute('href');
      const hrefParam = new URLSearchParams(href.split('?')[1] || '').get('file');
      if (fileParam && hrefParam === fileParam) a.classList.add('active');
    });
  </script>
</body>
</html>
